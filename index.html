<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"openqt.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="ä¼¤å¿ƒæ¡¥ä¸‹æ˜¥æ³¢ç»¿ï¼Œæ›¾æ˜¯æƒŠé¸¿ç…§å½±æ¥ã€‚">
<meta property="og:type" content="website">
<meta property="og:title" content="åœ¨äººé—´">
<meta property="og:url" content="https://openqt.github.io/index.html">
<meta property="og:site_name" content="åœ¨äººé—´">
<meta property="og:description" content="ä¼¤å¿ƒæ¡¥ä¸‹æ˜¥æ³¢ç»¿ï¼Œæ›¾æ˜¯æƒŠé¸¿ç…§å½±æ¥ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Jack Chu">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://openqt.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>åœ¨äººé—´</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">åœ¨äººé—´</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://openqt.github.io/2024/10/12/Keras-with-Intel-Arc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jack Chu">
      <meta itemprop="description" content="ä¼¤å¿ƒæ¡¥ä¸‹æ˜¥æ³¢ç»¿ï¼Œæ›¾æ˜¯æƒŠé¸¿ç…§å½±æ¥ã€‚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="åœ¨äººé—´">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/10/12/Keras-with-Intel-Arc/" class="post-title-link" itemprop="url">Kerasä½¿ç”¨Intel CPUå†…ç½®çš„Arcå¤„ç†å™¨åŠ é€Ÿè®¡ç®—</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2024-10-12 17:28:50 / ä¿®æ”¹æ—¶é—´ï¼š17:53:19" itemprop="dateCreated datePublished" datetime="2024-10-12T17:28:50+08:00">2024-10-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/machine-learning/" itemprop="url" rel="index"><span itemprop="name">machine-learning</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ç¯å¢ƒä¿¡æ¯"><a href="#ç¯å¢ƒä¿¡æ¯" class="headerlink" title="ç¯å¢ƒä¿¡æ¯"></a>ç¯å¢ƒä¿¡æ¯</h2><ul>
<li>WSL2 (Ubuntu)<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID: Ubuntu</span><br><span class="line">Description:    Ubuntu 22.04.4 LTS</span><br><span class="line">Release:        22.04</span><br><span class="line">Codename:       jammy</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="é…ç½®é©±åŠ¨"><a href="#é…ç½®é©±åŠ¨" class="headerlink" title="é…ç½®é©±åŠ¨"></a>é…ç½®é©±åŠ¨</h2><ul>
<li>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/developer/articles/technical/running-tensorflow-stable-diffusion-on-intel-arc.html">Running TensorFlow* Stable Diffusion on IntelÂ® Arcâ„¢ GPUs</a></li>
</ul>
<p>å‚è€ƒæ–‡ç« å†…çš„ç‰ˆæœ¬æ¯”è¾ƒè€æ—§ï¼Œè¿™é‡Œæ›´æ–°ä¸ºå½“å‰æœ€æ–°ç‰ˆæœ¬ã€‚</p>
<ul>
<li><p>å®‰è£…å·¥å…·é›†</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install -y gpg-agent wget</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸‹è½½Intelä»“åº“è¯ä¹¦</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo wget -qO - https://repositories.intel.com/graphics/intel-graphics.key | sudo gpg --dearmor --output /usr/share/keyrings/intel-graphics.gpg</span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®ä»“åº“ä¿¡æ¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ echo &#x27;deb [arch=amd64 signed-by=/usr/share/keyrings/intel-graphics.gpg] https://repositories.intel.com/gpu/ubuntu jammy/lts/2350 unified&#x27; | \</span><br><span class="line">     sudo tee /etc/apt/sources.list.d/intel.gpu.jammy.list</span><br><span class="line">$ sudo apt update</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£…Intelå·¥å…·</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install intel-opencl-icd intel-level-zero-gpu level-zero</span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®OneAPIä»“åº“</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Copied</span><br><span class="line">$ wget -O - https://apt.repos.intel.com/intel-gpg-keys/GPG-PUB-KEY-INTEL-SW-PRODUCTS.PUB | sudo gpg --dearmor --output /usr/share/keyrings/oneapi-archive-keyring.gpg</span><br><span class="line">$ echo &quot;deb [signed-by=/usr/share/keyrings/oneapi-archive-keyring.gpg] https://apt.repos.intel.com/oneapi all main&quot; | sudo tee /etc/apt/sources.list.d/oneAPI.list</span><br><span class="line">$ sudo apt update</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£…OneAPIæ”¯æŒåº“</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install intel-oneapi-runtime-dpcpp-cpp intel-oneapi-runtime-mkl</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£…tensorflowæ‰©å±•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip install --upgrade intel-extension-for-tensorflow[gpu]</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ£€éªŒé…ç½®<br>å¦‚æœæœ‰<code>Intel(R) Level-Zero</code>å­—æ ·ï¼Œè¡¨ç¤ºKeraså¯ä»¥è¯†åˆ«Intelçš„GPUäº†ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ python -c &quot;import tensorflow&quot;</span><br><span class="line">... ...</span><br><span class="line">2024-10-12 17:51:26.088761: I itex/core/wrapper/itex_gpu_wrapper.cc:35] Intel Extension for Tensorflow* GPU backend is loaded.</span><br><span class="line">2024-10-12 17:51:26.209443: I itex/core/devices/gpu/itex_gpu_runtime.cc:129] Selected platform: Intel(R) Level-Zero</span><br><span class="line">2024-10-12 17:51:26.209538: I itex/core/devices/gpu/itex_gpu_runtime.cc:154] number of sub-devices is zero, expose root device.</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://openqt.github.io/2024/03/26/update-trivy-data-by-go-restful/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jack Chu">
      <meta itemprop="description" content="ä¼¤å¿ƒæ¡¥ä¸‹æ˜¥æ³¢ç»¿ï¼Œæ›¾æ˜¯æƒŠé¸¿ç…§å½±æ¥ã€‚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="åœ¨äººé—´">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/03/26/update-trivy-data-by-go-restful/" class="post-title-link" itemprop="url">é€šè¿‡go-restfulæ›´æ–°Harborçš„Trivyæ•°æ®åº“</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2024-03-26 11:30:00" itemprop="dateCreated datePublished" datetime="2024-03-26T11:30:00+08:00">2024-03-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-10-12 17:31:43" itemprop="dateModified" datetime="2024-10-12T17:31:43+08:00">2024-10-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">programming</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="trivyæ¼æ´æ•°æ®åº“ä¸‹è½½"><a href="#trivyæ¼æ´æ•°æ®åº“ä¸‹è½½" class="headerlink" title="trivyæ¼æ´æ•°æ®åº“ä¸‹è½½"></a>trivyæ¼æ´æ•°æ®åº“ä¸‹è½½</h2><ul>
<li>æ•°æ®å­˜å‚¨ä»¥ociæ–¹å¼å­˜å‚¨ï¼Œéœ€è¦é€šè¿‡ä¸“ç”¨å·¥å…·ä¸‹è½½ã€‚</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ oras pull ghcr.io/aquasecurity/trivy-db:2</span><br><span class="line">$ <span class="built_in">ls</span> -l</span><br><span class="line">.rw-rw-r--  47M yang 28 3æœˆ  10:57 db.tar.gz</span><br></pre></td></tr></table></figure>


<h2 id="trivyæ¼æ´æ•°æ®åº“ä¸Šä¼ æœåŠ¡"><a href="#trivyæ¼æ´æ•°æ®åº“ä¸Šä¼ æœåŠ¡" class="headerlink" title="trivyæ¼æ´æ•°æ®åº“ä¸Šä¼ æœåŠ¡"></a>trivyæ¼æ´æ•°æ®åº“ä¸Šä¼ æœåŠ¡</h2><ul>
<li>ä¸Šä¼ æ•°æ®å‘½ä»¤</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XPUT http://localhost/api/trivy/v1/database -F <span class="string">&quot;db=@bin/db.tar.gz&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ä»¥<code>github.com/emicklei/go-restful-openapi/v2 v2.9.1</code>ä¸ºAPIæ¡†æ¶æ³¨å†Œä¸Šä¼ æ¥å£</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">webservice.Route(webservice.PUT(<span class="string">&quot;/database&quot;</span>).</span><br><span class="line">	Doc(<span class="string">&quot;Update trivy vulnerability database.&quot;</span>).</span><br><span class="line">	Param(webservice.BodyParameter(<span class="string">&quot;db&quot;</span>, <span class="string">&quot;trivy vulnerability database.&quot;</span>)).</span><br><span class="line">	To(h.updateVulnerabilityDatabase).</span><br><span class="line">	Consumes(<span class="string">&quot;multipart/form-data&quot;</span>).</span><br><span class="line">	Returns(http.StatusOK, api.StatusOK, <span class="literal">nil</span>).</span><br><span class="line">	Metadata(restfulspec.KeyOpenAPITags, []<span class="type">string</span>&#123;constants.TrivyTag&#125;))</span><br></pre></td></tr></table></figure>

<ul>
<li>è¯»å…¥form-dataï¼Œç›´æ¥è§£å‹å¹¶è¿”å›trivy metedataä¿¡æ¯</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h *handler)</span></span> updateVulnerabilityDatabase(request *restful.Request, response *restful.Response) &#123;</span><br><span class="line">	formfile, _, err := request.Request.FormFile(<span class="string">&quot;db&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		api.HandleBadRequest(response, request, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> formfile.Close()</span><br><span class="line"></span><br><span class="line">	err = utils.Extract(formfile, h.trivyOptions.Cache)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		api.HandleBadRequest(response, request, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// è¯»æ•°æ®çš„å…ƒä¿¡æ¯å¹¶è¿”å›ï¼Œç¡®è®¤ä¸€è‡´æ€§</span></span><br><span class="line">	metadata, err := os.ReadFile(filepath.Join(h.trivyOptions.Cache, <span class="string">&quot;metadata.json&quot;</span>))</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		api.HandleBadRequest(response, request, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	response.Write(metadata)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Implements Extractor.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Extract</span><span class="params">(buffer io.Reader, targetDir <span class="type">string</span>)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">	uncompressedStream, err := gzip.NewReader(buffer)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> err</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> err := os.MkdirAll(targetDir, <span class="number">0755</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> err</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	tarReader := tar.NewReader(uncompressedStream)</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		header, err := tarReader.Next()</span><br><span class="line">		<span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> err</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		path, err := cleanJoin(targetDir, header.Name)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> err</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">switch</span> header.Typeflag &#123;</span><br><span class="line">		<span class="keyword">case</span> tar.TypeDir:</span><br><span class="line">			<span class="keyword">if</span> err := os.Mkdir(path, <span class="number">0755</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">				<span class="keyword">return</span> err</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">case</span> tar.TypeReg:</span><br><span class="line">			outFile, err := os.OpenFile(path, os.O_CREATE|os.O_RDWR, os.FileMode(header.Mode))</span><br><span class="line">			<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">				<span class="keyword">return</span> err</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> _, err := io.Copy(outFile, tarReader); err != <span class="literal">nil</span> &#123;</span><br><span class="line">				outFile.Close()</span><br><span class="line">				<span class="keyword">return</span> err</span><br><span class="line">			&#125;</span><br><span class="line">			outFile.Close()</span><br><span class="line">		<span class="comment">// We don&#x27;t want to process these extension header files.</span></span><br><span class="line">		<span class="keyword">case</span> tar.TypeXGlobalHeader, tar.TypeXHeader:</span><br><span class="line">			<span class="keyword">continue</span></span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="keyword">return</span> errors.Errorf(<span class="string">&quot;unknown type: %b in %s&quot;</span>, header.Typeflag, header.Name)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æœåŠ¡é•œåƒåˆ¶ä½œ</li>
</ul>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> alpine:<span class="number">3.16</span>.<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> bin/cmd/trivy-apiserver /</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> trivy-core.yaml /etc/trivy-core/</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">9090</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;/trivy-apiserver&quot;</span>, <span class="string">&quot;-v5&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<h2 id="APIæœåŠ¡ä¸Harboré›†æˆ-ingress-pod"><a href="#APIæœåŠ¡ä¸Harboré›†æˆ-ingress-pod" class="headerlink" title="APIæœåŠ¡ä¸Harboré›†æˆ(ingress, pod)"></a>APIæœåŠ¡ä¸Harboré›†æˆ(ingress, pod)</h2><ul>
<li>å¢åŠ traefik middlewareä»¥å¤„ç†URLè·¯å¾„å‰ç¼€</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Middleware</span></span><br><span class="line"><span class="comment"># Strip prefix /trivy</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">traefik.containo.us/v1alpha1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Middleware</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">strip-trivy</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">&quot;default&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">stripPrefix:</span></span><br><span class="line">    <span class="attr">forceSlash:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">prefixes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/trivy</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å¢åŠ harbor-ingressé…ç½®ï¼ˆéœ€è¦æ›´æ–°éƒ¨åˆ†ï¼‰</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Ingress</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">harbor-ingress</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">kubernetes.io/ingress.class:</span> <span class="string">traefik</span></span><br><span class="line">    <span class="attr">traefik.ingress.kubernetes.io/router.middlewares:</span> <span class="string">default-strip-trivy@kubernetescrd</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">host:</span> <span class="string">harbor.internal.io</span></span><br><span class="line">      <span class="attr">http:</span></span><br><span class="line">        <span class="attr">paths:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">/trivy/</span></span><br><span class="line">            <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">            <span class="attr">backend:</span></span><br><span class="line">              <span class="attr">service:</span></span><br><span class="line">                <span class="attr">name:</span> <span class="string">harbor-trivy</span></span><br><span class="line">                <span class="attr">port:</span></span><br><span class="line">                  <span class="attr">name:</span> <span class="string">trivy-api</span></span><br></pre></td></tr></table></figure>

<ul>
<li>åœ¨å·²æœ‰harbor-trivyå†…åŠ å…¥trivy-apiserverå®¹å™¨</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">harbor-trivy</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">trivy</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">harbor-adapter-trivy:2.10.0-debian-12-r13</span></span><br><span class="line">          <span class="attr">imagePullPolicy:</span> <span class="string">&quot;IfNotPresent&quot;</span></span><br><span class="line">          <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">api-server</span></span><br><span class="line">              <span class="attr">containerPort:</span> <span class="number">8080</span></span><br><span class="line">          <span class="attr">volumeMounts:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">data</span></span><br><span class="line">              <span class="attr">mountPath:</span> <span class="string">/bitnami/harbor-adapter-trivy/.cache</span></span><br><span class="line">              <span class="attr">readOnly:</span> <span class="literal">false</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">apiserver</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">trivy-apiserver:v1.0.2</span></span><br><span class="line">          <span class="attr">imagePullPolicy:</span> <span class="string">&quot;IfNotPresent&quot;</span></span><br><span class="line">          <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">trivy-api</span></span><br><span class="line">              <span class="attr">containerPort:</span> <span class="number">9090</span></span><br><span class="line">          <span class="attr">volumeMounts:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">data</span></span><br><span class="line">              <span class="attr">mountPath:</span> <span class="string">/bitnami/harbor-adapter-trivy/.cache</span></span><br><span class="line">              <span class="attr">readOnly:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">data</span></span><br><span class="line">          <span class="attr">persistentVolumeClaim:</span></span><br><span class="line">            <span class="attr">claimName:</span> <span class="string">trivy-data</span></span><br></pre></td></tr></table></figure>

<ul>
<li>æµ‹è¯•å¤–éƒ¨æ¥å£ä¸Šä¼ æ•°æ®</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ curl -kXPUT https://harbor.internal.io:21000/trivy/api/v1/database -F <span class="string">&quot;db=@bin/db.tar.gz&quot;</span></span><br><span class="line">&#123;<span class="string">&quot;Version&quot;</span>:2,<span class="string">&quot;NextUpdate&quot;</span>:<span class="string">&quot;2024-03-28T06:15:32.76330602Z&quot;</span>,<span class="string">&quot;UpdatedAt&quot;</span>:<span class="string">&quot;2024-03-28T00:15:32.763306431Z&quot;</span>,<span class="string">&quot;DownloadedAt&quot;</span>:<span class="string">&quot;0001-01-01T00:00:00Z&quot;</span>&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://openqt.github.io/2024/03/25/deploy-acccessable-harbor-in-kind/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jack Chu">
      <meta itemprop="description" content="ä¼¤å¿ƒæ¡¥ä¸‹æ˜¥æ³¢ç»¿ï¼Œæ›¾æ˜¯æƒŠé¸¿ç…§å½±æ¥ã€‚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="åœ¨äººé—´">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/03/25/deploy-acccessable-harbor-in-kind/" class="post-title-link" itemprop="url">kindé›†ç¾¤å†…éƒ¨ç½²å¯è®¿é—®çš„HarboræœåŠ¡</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2024-03-25 13:36:30" itemprop="dateCreated datePublished" datetime="2024-03-25T13:36:30+08:00">2024-03-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-10-12 17:21:57" itemprop="dateModified" datetime="2024-10-12T17:21:57+08:00">2024-10-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/devops/" itemprop="url" rel="index"><span itemprop="name">devops</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/devops/kubernetes/" itemprop="url" rel="index"><span itemprop="name">kubernetes</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="éƒ¨ç½²KubernetesåŠå¿…è¦æœåŠ¡"><a href="#éƒ¨ç½²KubernetesåŠå¿…è¦æœåŠ¡" class="headerlink" title="éƒ¨ç½²KubernetesåŠå¿…è¦æœåŠ¡"></a>éƒ¨ç½²KubernetesåŠå¿…è¦æœåŠ¡</h2><ul>
<li><p>dockerç‰ˆæœ¬24.0.5</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ docker version</span><br><span class="line">Client:</span><br><span class="line"> Version:           24.0.5</span><br><span class="line"> API version:       1.43</span><br><span class="line"> Go version:        go1.20.3</span><br><span class="line"> Git commit:        24.0.5-0ubuntu1~22.04.1</span><br><span class="line"> Built:             Mon Aug 21 19:50:14 2023</span><br><span class="line"> OS/Arch:           linux/amd64</span><br><span class="line"> Context:           default</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          24.0.5</span><br><span class="line">  API version:      1.43 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.20.3</span><br><span class="line">  Git commit:       24.0.5-0ubuntu1~22.04.1</span><br><span class="line">  Built:            Mon Aug 21 19:50:14 2023</span><br><span class="line">  OS/Arch:          linux/amd64</span><br><span class="line">  Experimental:     <span class="literal">true</span></span><br><span class="line"> containerd:</span><br><span class="line">  Version:          1.7.2</span><br><span class="line">  GitCommit:        </span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.1.0-0ubuntu1.1</span><br><span class="line">  GitCommit:        </span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.19.0</span><br><span class="line">  GitCommit:        </span><br></pre></td></tr></table></figure>
</li>
<li><p>kindç‰ˆæœ¬v0.22.0</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ kind version</span><br><span class="line">kind v0.22.0 go1.21.1 linux/amd64</span><br></pre></td></tr></table></figure>
</li>
<li><p>kindé›†ç¾¤é…ç½®æ–‡ä»¶</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">Cluster</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">kind.x-k8s.io/v1alpha4</span></span><br><span class="line"><span class="attr">containerdConfigPatches:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">|-</span></span><br><span class="line"><span class="string">  [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry]</span></span><br><span class="line"><span class="string">    [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.mirrors]</span></span><br><span class="line"><span class="string">      [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.mirrors.&quot;docker.io&quot;]</span></span><br><span class="line"><span class="string">        endpoint = [&quot;https://registry-1.docker.io&quot;]</span></span><br><span class="line"><span class="string">      [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.mirrors.&quot;gcr.io&quot;]</span></span><br><span class="line"><span class="string">        endpoint = [&quot;https://gcr.m.daocloud.io&quot;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="attr">networking:</span></span><br><span class="line">  <span class="attr">apiServerAddress:</span> <span class="string">&quot;0.0.0.0&quot;</span></span><br><span class="line">  <span class="attr">apiServerPort:</span> <span class="number">6443</span></span><br><span class="line"></span><br><span class="line"><span class="attr">nodes:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">role:</span> <span class="string">control-plane</span></span><br><span class="line">  <span class="attr">kubeadmConfigPatches:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">|</span></span><br><span class="line"><span class="string">    kind: InitConfiguration</span></span><br><span class="line"><span class="string">    nodeRegistration:</span></span><br><span class="line"><span class="string">      kubeletExtraArgs:</span></span><br><span class="line"><span class="string">        node-labels: &quot;ingress-ready=true&quot;</span></span><br><span class="line"><span class="string"></span>  <span class="attr">extraPortMappings:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">31000</span></span><br><span class="line">    <span class="attr">hostPort:</span> <span class="number">21000</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">TCP</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>éƒ¨ç½²Kubernetesé›†ç¾¤ï¼ˆå•èŠ‚ç‚¹ï¼‰</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ kind create cluster --name harbor --config demo.yaml</span><br><span class="line">Creating cluster <span class="string">&quot;harbor&quot;</span> ...</span><br><span class="line"> âœ“ Ensuring node image (kindest/node:v1.29.2) ğŸ–¼</span><br><span class="line"> âœ“ Preparing nodes ğŸ“¦  </span><br><span class="line"> âœ“ Writing configuration ğŸ“œ </span><br><span class="line"> âœ“ Starting control-plane ğŸ•¹ï¸ </span><br><span class="line"> âœ“ Installing CNI ğŸ”Œ </span><br><span class="line"> âœ“ Installing StorageClass ğŸ’¾ </span><br><span class="line">Set kubectl context to <span class="string">&quot;kind-harbor&quot;</span></span><br><span class="line">You can now use your cluster with:</span><br><span class="line"></span><br><span class="line">kubectl cluster-info --context kind-harbor</span><br><span class="line"></span><br><span class="line">Not sure what to <span class="keyword">do</span> next? ğŸ˜…  Check out https://kind.sigs.k8s.io/docs/user/quick-start/</span><br></pre></td></tr></table></figure>
</li>
<li><p>éªŒè¯é›†ç¾¤(é»˜è®¤contextå·²ç»ä¿®æ”¹ä¸ºæœ€æ–°éƒ¨ç½²çš„kind-harbor)</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get no</span><br><span class="line">NAME                   STATUS   ROLES           AGE   VERSION</span><br><span class="line">harbor-control-plane   Ready    control-plane   37s   v1.29.2</span><br><span class="line"></span><br><span class="line">$ kubectl get po -A</span><br><span class="line">NAMESPACE            NAME                                           READY   STATUS    RESTARTS   AGE</span><br><span class="line">kube-system          coredns-76f75df574-6zqwf                       1/1     Running   0          98s</span><br><span class="line">kube-system          coredns-76f75df574-kwtm7                       1/1     Running   0          98s</span><br><span class="line">kube-system          etcd-harbor-control-plane                      1/1     Running   0          112s</span><br><span class="line">kube-system          kindnet-6xcrd                                  1/1     Running   0          98s</span><br><span class="line">kube-system          kube-apiserver-harbor-control-plane            1/1     Running   0          113s</span><br><span class="line">kube-system          kube-controller-manager-harbor-control-plane   1/1     Running   0          113s</span><br><span class="line">kube-system          kube-proxy-sslv8                               1/1     Running   0          98s</span><br><span class="line">kube-system          kube-scheduler-harbor-control-plane            1/1     Running   0          113s</span><br><span class="line">local-path-storage   local-path-provisioner-7577fdbbfb-9zgqc        1/1     Running   0          98s</span><br></pre></td></tr></table></figure>
</li>
<li><p>è·å–cert-managerçš„Chartç‰ˆæœ¬v1.14.3</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> Chart.yaml</span><br><span class="line">name: cert-manager</span><br><span class="line">appVersion: v1.14.3</span><br><span class="line">version: v1.14.3</span><br></pre></td></tr></table></figure>
</li>
<li><p>éƒ¨ç½²cert-manager</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ helm install cert-manager --namespace cert-manager --create-namespace --kube-context kind-harbor .</span><br></pre></td></tr></table></figure>
</li>
<li><p>è·å–traefikçš„Chartç‰ˆæœ¬26.1.0</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> Chart.yaml</span><br><span class="line">name: traefik</span><br><span class="line">appVersion: v2.11.0</span><br><span class="line">version: 26.1.0</span><br></pre></td></tr></table></figure>
</li>
<li><p>éƒ¨ç½²traefik</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ helm install traefik --namespace kube-system --create-namespace --kube-context kind-harbor .</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹traefikçš„serviceé…ç½®</p>
</li>
</ul>
<ol>
<li>ä¿®æ”¹traefikçš„serviceç±»å‹ï¼ŒLoadBalancer &#x3D;&gt; NodePortã€‚</li>
<li>ä¿®æ”¹nodePortç«¯å£ä¸º31000ï¼Œä¸ä¹‹å‰éƒ¨ç½²é›†ç¾¤çš„å¯¹å¤–ç«¯å£å¯¹åº”</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">websecure</span></span><br><span class="line">    <span class="attr">nodePort:</span> <span class="number">31000</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">443</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="string">websecure</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">NodePort</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ä¿®æ”¹local-pathä»¥æ”¯æŒReadWriteManyæ¨¡å¼<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl edit cm local-path-config -n local-path-storage</span><br></pre></td></tr></table></figure></li>
</ul>
<p>æ›´æ–°config.jsonå¦‚ä¸‹ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">config.json:</span> <span class="string">|-</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">            &quot;nodePathMap&quot;:[</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                    &quot;node&quot;:&quot;DEFAULT_PATH_FOR_NON_LISTED_NODES&quot;,</span></span><br><span class="line"><span class="string">                    &quot;paths&quot;:[&quot;/var/local-path-provisioner&quot;]</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            ]</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">config.json:</span> <span class="string">|-</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">      &quot;sharedFileSystemPath&quot;: &quot;/opt/local-path-provisioner&quot;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br></pre></td></tr></table></figure>

<p>é‡å¯local-pathæœåŠ¡</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl -n local-path-storage get po -o jsonpath=<span class="string">&quot;&#123;.items[].metadata.name&#125;&quot;</span> | xargs kubectl -n local-path-storage delete po </span><br></pre></td></tr></table></figure>


<h2 id="éƒ¨ç½²HarboræœåŠ¡"><a href="#éƒ¨ç½²HarboræœåŠ¡" class="headerlink" title="éƒ¨ç½²HarboræœåŠ¡"></a>éƒ¨ç½²HarboræœåŠ¡</h2><ul>
<li>è·å–harborçš„Chartç‰ˆæœ¬19.9.0</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/bitnami/charts/tree/main/bitnami/harbor">https://github.com/bitnami/charts/tree/main/bitnami/harbor</a></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> Chart.yaml</span><br><span class="line">name: harbor</span><br><span class="line">apiVersion: v2</span><br><span class="line">version: 19.9.0</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¿®æ”¹values.yaml</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">externalURL:</span> <span class="string">https://harbor.internal.com</span></span><br><span class="line"><span class="attr">adminPassword:</span> <span class="string">&quot;Passw0rd&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">ingress:</span></span><br><span class="line">  <span class="attr">certProvider:</span> <span class="string">&quot;cert-manager&quot;</span></span><br><span class="line">  <span class="attr">core:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">harbor.internal.com</span></span><br></pre></td></tr></table></figure>

<ul>
<li>éƒ¨ç½²harbor<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ helm upgrade harbor -i --namespace harbor --create-namespace --<span class="built_in">set</span> global.storageClass=standard --kube-context kind-harbor .</span><br></pre></td></tr></table></figure></li>
</ul>
<p>æŸ¥çœ‹éƒ¨ç½²çš„PODæƒ…å†µ</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl -n harbor get po</span><br><span class="line">NAME                                 READY   STATUS    RESTARTS      AGE</span><br><span class="line">harbor-core-75f79fb9f9-qpblp         1/1     Running   0             14m</span><br><span class="line">harbor-jobservice-5677b948b8-sw87s   1/1     Running   0             14m</span><br><span class="line">harbor-portal-67995b4946-mhvkn       1/1     Running   0             14m</span><br><span class="line">harbor-postgresql-0                  1/1     Running   0             14m</span><br><span class="line">harbor-redis-master-0                1/1     Running   0             14m</span><br><span class="line">harbor-registry-5fb59b549-c86kj      2/2     Running   0             14m</span><br><span class="line">harbor-trivy-0                       1/1     Running   0             14m</span><br></pre></td></tr></table></figure>

<ul>
<li><p>é…ç½®åŸŸå<br>åœ¨<code>/etc/hosts</code>å†…é…ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.2.110 harbor.internal.com</span><br></pre></td></tr></table></figure>
</li>
<li><p>è®¿é—®harboré¡µé¢ï¼Œè¾“å…¥ä¹‹å‰é…ç½®çš„adminçš„å¯†ç </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://harbor.internal.com:21000</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="ä¿®æ”¹HarboræœåŠ¡ç±»å‹"><a href="#ä¿®æ”¹HarboræœåŠ¡ç±»å‹" class="headerlink" title="ä¿®æ”¹HarboræœåŠ¡ç±»å‹"></a>ä¿®æ”¹HarboræœåŠ¡ç±»å‹</h2><p>ä»Statefulsetä¿®æ”¹ä¸ºDeploymentã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">StatefulSet</span> <span class="string">=&gt;</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">    <span class="comment"># serviceName # éœ€è¦æ³¨é‡Šæ‰</span></span><br><span class="line">    <span class="string">updateStrategy</span> <span class="string">=&gt;</span> <span class="string">strategy</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># éœ€è¦å°†æ•´ä¸ªvolumeClaimTemplatesæ”¹ä¸ºPersistentVolumeClaimå½¢å¼</span></span><br><span class="line">    <span class="comment"># åŒæ—¶è¦å¢åŠ volumeså£°æ˜åŸŸ</span></span><br><span class="line">    <span class="string">volumeClaimTemplates</span> <span class="string">=&gt;</span> <span class="string">PersistentVolumeClaim</span> </span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">data</span></span><br><span class="line">          <span class="attr">persistentVolumeClaim:</span></span><br><span class="line">            <span class="attr">claimName:</span> <span class="string">data</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://openqt.github.io/2024/01/19/ml-basic/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jack Chu">
      <meta itemprop="description" content="ä¼¤å¿ƒæ¡¥ä¸‹æ˜¥æ³¢ç»¿ï¼Œæ›¾æ˜¯æƒŠé¸¿ç…§å½±æ¥ã€‚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="åœ¨äººé—´">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/19/ml-basic/" class="post-title-link" itemprop="url">æœºå™¨å­¦ä¹ åŸºç¡€</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2024-01-19 15:04:03" itemprop="dateCreated datePublished" datetime="2024-01-19T15:04:03+08:00">2024-01-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-10-12 17:21:57" itemprop="dateModified" datetime="2024-10-12T17:21:57+08:00">2024-10-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/machine-learning/" itemprop="url" rel="index"><span itemprop="name">machine-learning</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/500366203">æ–¹å·®ï¼Œæ ‡å‡†å·®ä¸­è¦æ±‚å·®çš„å¹³æ–¹çš„åŸå› åŠå…¶å‡ ä½•æ„ä¹‰</a></p>
<h2 id="ä¸‹é‡‡æ ·å’Œä¸Šé‡‡æ ·"><a href="#ä¸‹é‡‡æ ·å’Œä¸Šé‡‡æ ·" class="headerlink" title="ä¸‹é‡‡æ ·å’Œä¸Šé‡‡æ ·"></a>ä¸‹é‡‡æ ·å’Œä¸Šé‡‡æ ·</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/579702765">ä¸Šé‡‡æ ·(UnSampling)å’Œä¸‹é‡‡æ ·(DownSampling)æ˜¯å•¥</a></p>
<p>ç¼©å°å›¾åƒï¼ˆæˆ–ç§°ä¸ºä¸‹é‡‡æ ·ï¼ˆsubsampledï¼‰æˆ–é™é‡‡æ ·ï¼ˆdownsampledï¼‰ï¼‰çš„ä¸»è¦ç›®çš„æœ‰ä¸¤ä¸ªï¼š</p>
<ol>
<li>ä½¿å¾—å›¾åƒç¬¦åˆæ˜¾ç¤ºåŒºåŸŸçš„å¤§å°</li>
<li>ç”Ÿæˆå¯¹åº”å›¾åƒçš„ç¼©ç•¥å›¾</li>
</ol>
<p>æ”¾å¤§å›¾åƒï¼ˆæˆ–ç§°ä¸ºä¸Šé‡‡æ ·ï¼ˆupsamplingï¼‰æˆ–å›¾åƒæ’å€¼ï¼ˆinterpolatingï¼‰ï¼‰çš„ä¸»è¦ç›®çš„æ˜¯ï¼š</p>
<ol>
<li>æ”¾å¤§åŸå›¾åƒï¼Œä»è€Œå¯ä»¥æ˜¾ç¤ºåœ¨æ›´é«˜åˆ†è¾¨ç‡çš„æ˜¾ç¤ºè®¾å¤‡ä¸Š</li>
</ol>
<h2 id="Models"><a href="#Models" class="headerlink" title="Models"></a>Models</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/31852747">æ·±åº¦æ®‹å·®ç½‘ç»œï¼ˆDeep residual network, ResNetï¼‰</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://openqt.github.io/2024/01/03/learning-kubeflow/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jack Chu">
      <meta itemprop="description" content="ä¼¤å¿ƒæ¡¥ä¸‹æ˜¥æ³¢ç»¿ï¼Œæ›¾æ˜¯æƒŠé¸¿ç…§å½±æ¥ã€‚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="åœ¨äººé—´">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/03/learning-kubeflow/" class="post-title-link" itemprop="url">å­¦ä¹ Kubeflow</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2024-01-03 14:24:15" itemprop="dateCreated datePublished" datetime="2024-01-03T14:24:15+08:00">2024-01-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-10-12 17:35:12" itemprop="dateModified" datetime="2024-10-12T17:35:12+08:00">2024-10-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/devops/" itemprop="url" rel="index"><span itemprop="name">devops</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/devops/machine-learning/" itemprop="url" rel="index"><span itemprop="name">machine-learning</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>Kubeflowçš„ç›®æ ‡æ˜¯åœ¨Kubernetesä¸Šèƒ½å¤Ÿç®€å•çš„éƒ¨ç½²æœºå™¨å­¦ä¹ è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°çš„å„ç§å·¥å…·å’ŒæœåŠ¡ï¼Œå¹¶æä¾›è¿ç§»å’Œæ‰©å±•çš„æ–¹æ³•ã€‚</p>
<p>Kubeflowç‰µæ‰¯åˆ°å¤§é‡æœºå™¨å­¦ä¹ çš„æ¦‚å¿µå’Œæ–¹å¼æ–¹æ³•ï¼Œéœ€è¦å¯¹MLæœ‰åŸºæœ¬çš„äº†è§£æ‰èƒ½æ›´å¥½çš„è¿ç”¨å’Œç†è§£ã€‚</p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><ul>
<li>ç¯å¢ƒæ˜¯ä¸¤å°è™šæ‹Ÿæœºï¼Œ16C32G100G<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat /etc/rocky-release</span></span><br><span class="line">Rocky Linux release 8.5 (Green Obsidian)</span><br></pre></td></tr></table></figure></li>
<li>æ›´æ–°ç³»ç»Ÿ<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dnf update -y</span></span><br></pre></td></tr></table></figure></li>
<li>å®‰è£…Kubernetes(1.28.6)<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dnf install -y conntrack socat iptables ipvsadm wget git</span></span><br><span class="line"><span class="comment"># kk create cluster -f config.yml -y</span></span><br><span class="line">17:06:32 CST Pipeline[CreateClusterPipeline] execute successfully</span><br><span class="line">Installation is complete.</span><br></pre></td></tr></table></figure></li>
<li>å®‰è£…åŸºç¡€å·¥å…·<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> sysctl fs.inotify.max_user_instances=2280</span><br><span class="line"><span class="built_in">sudo</span> sysctl fs.inotify.max_user_watches=1255360</span><br><span class="line"></span><br><span class="line">wget https://github.com/kubernetes-sigs/kustomize/releases/download/kustomize%2Fv5.3.0/kustomize_v5.3.0_linux_amd64.tar.gz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://openqt.github.io/2023/11/29/learning-react/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jack Chu">
      <meta itemprop="description" content="ä¼¤å¿ƒæ¡¥ä¸‹æ˜¥æ³¢ç»¿ï¼Œæ›¾æ˜¯æƒŠé¸¿ç…§å½±æ¥ã€‚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="åœ¨äººé—´">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/11/29/learning-react/" class="post-title-link" itemprop="url">å¦‚ä½•å­¦ä¹ React</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-11-29 10:40:52" itemprop="dateCreated datePublished" datetime="2023-11-29T10:40:52+08:00">2023-11-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-10-12 17:21:57" itemprop="dateModified" datetime="2024-10-12T17:21:57+08:00">2024-10-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/programming/" itemprop="url" rel="index"><span itemprop="name">programming</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://github.com/petehunt/react-howto/blob/master/README-zh.md">https://github.com/petehunt/react-howto/blob/master/README-zh.md</a></p>
<p>å¦‚æœä½ æ˜¯ä¸€ä¸ª React (æˆ–è€…å‰ç«¯) æ–°æ‰‹, å‡ºäºä»¥ä¸‹çš„åŸå› , ä½ å¯èƒ½ä¼šå¯¹è¿™ä¸ªç”Ÿæ€åœˆæ„Ÿåˆ°å›°æƒ‘:</p>
<ul>
<li>React çš„ç›®æ ‡ç¾¤ä½“å†æ¥æ˜¯å–œæ¬¢å°è¯•æ–°äº‹ç‰©çš„å¼€å‘è€…å’Œå‰ç«¯ä¸“å®¶.</li>
<li>Facebook å¼€æºçš„å†…å®¹æ˜¯åº”ç”¨åœ¨ä»–ä»¬çš„å®é™…åº”ç”¨ä¸­, å› æ­¤ä»–ä»¬æ²¡æœ‰å…³æ³¨é‚£äº›æ¯” Facebook å°çš„å·¥ç¨‹éœ€æ±‚.</li>
<li>ç°æœ‰çš„ React æŒ‡å¼•æ°´å¹³å‚å·®ä¸é½.</li>
</ul>
<p>åœ¨æœ¬æ–‡ä¸­, æˆ‘ä¼šå‡è®¾ä½ å·²æœ‰ä½¿ç”¨ HTML, CSS å’Œ JavaScript å¼€å‘ç½‘é¡µçš„åŸºç¡€.</p>
<h2 id="ä¸ºä»€ä¹ˆè¦å¬æˆ‘çš„"><a href="#ä¸ºä»€ä¹ˆè¦å¬æˆ‘çš„" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å¬æˆ‘çš„?"></a>ä¸ºä»€ä¹ˆè¦å¬æˆ‘çš„?</h2><p>å…³äº React, ç°åœ¨å·²ç»æœ‰å¤§é‡çš„ç›¸äº’å†²çªçš„å»ºè®®äº†, ä¸ºä»€ä¹ˆè¦å¬æˆ‘çš„?</p>
<p>å› ä¸ºæˆ‘æ˜¯åœ¨ Facebook æ„å»ºå¹¶å¼€æº React çš„æœ€åˆæˆå‘˜ä¹‹ä¸€. ç°åœ¨æˆ‘ç¦»å¼€äº† Facebook å¹¶åŠ å…¥äº†ä¸€å®¶åˆåˆ›å…¬å¸, æ‰€ä»¥æˆ‘ä¹Ÿä¸ä¼šç«™åœ¨ Facebook çš„ç«‹åœºä¸Šæ¥è¡¨æ€.</p>
<h2 id="å¦‚ä½•è¸å…¥-React-ç”Ÿæ€åœˆ"><a href="#å¦‚ä½•è¸å…¥-React-ç”Ÿæ€åœˆ" class="headerlink" title="å¦‚ä½•è¸å…¥ React ç”Ÿæ€åœˆ"></a>å¦‚ä½•è¸å…¥ React ç”Ÿæ€åœˆ</h2><p>æ‰€æœ‰çš„è½¯ä»¶éƒ½æ˜¯å»ºç«‹åœ¨æŸä¸ªæŠ€æœ¯æ ˆä¹‹ä¸Šçš„, ä½ éœ€è¦å¯¹æ•´ä¸ªæŠ€æœ¯æ ˆæœ‰è¶³å¤Ÿæ·±å…¥çš„ç†è§£, æ‰èƒ½å»ºé€ ä½ çš„åº”ç”¨. ä¸ºä»€ä¹ˆ React ç”Ÿæ€åœˆçš„å·¥å…·ä¼¼ä¹æ€»è®©äººæ„Ÿè§‰å‹åŠ›å±±å¤§å‘¢, å› ä¸ºå®ƒæ€»æ˜¯ä»¥é”™è¯¯çš„é¡ºåºè¢«è§£é‡Š:</p>
<p>ä½ åº”è¯¥æŒ‰ç…§ä»¥ä¸‹çš„é¡ºåºè¿›è¡Œå­¦ä¹ , <strong>è€Œä¸æ˜¯è·³ç€å­¦æˆ–è€…åŒæ—¶å­¦ä¹ </strong>:</p>
<ul>
<li><a href="#user-content-%E5%AD%A6%E4%B9%A0-react-%E6%9C%AC%E8%BA%AB">React</a></li>
<li><a href="#user-content-%E5%AD%A6%E4%B9%A0-npm"><code>npm</code></a></li>
<li><a href="#user-content-%E5%AD%A6%E4%B9%A0-javascript-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7">JavaScript â€œæ‰“åŒ…å·¥å…·â€</a></li>
<li><a href="#user-content-%E5%AD%A6%E4%B9%A0-es6">ES6</a></li>
<li><a href="#user-content-%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%94%B1-routing">Routing</a></li>
<li><a href="#user-content-%E5%AD%A6%E4%B9%A0-flux">Flux</a></li>
</ul>
<p><strong>ä½ ä¸éœ€è¦æŠŠè¿™äº›éƒ½å­¦å®Œæ‰å»ä½¿ç”¨ React.</strong> åªéœ€è¦åœ¨ä½ é‡åˆ°é—®é¢˜éœ€è¦è§£å†³çš„æ—¶å€™, æ‰è¿›å…¥ä¸‹ä¸€æ­¥çš„å­¦ä¹ .</p>
<p>å¦å¤–, åœ¨ React ç¤¾åŒºä¸­, æœ‰ä¸€äº›å‰æ²¿ä¸»é¢˜æ˜¯ç»å¸¸è¢«æåŠåˆ°çš„, ä»¥ä¸‹çš„è¿™äº›ä¸»é¢˜å¾ˆæœ‰æ„æ€, ä½†ä¹Ÿå¾ˆéš¾å¼„æ‡‚, æ‰€ä»¥å®ƒä»¬è¿œæ²¡æœ‰ä¸Šé¢çš„ä¸»é¢˜æµè¡Œ, <strong>å¤§å¤šæ•°åº”ç”¨ä¹Ÿä¸éœ€è¦ç”¨åˆ°è¿™äº›.</strong></p>
<ul>
<li><a href="#user-content-%E5%AD%A6%E4%B9%A0%E5%86%85%E8%81%94%E6%A0%B7%E5%BC%8F">å†…è”æ ·å¼</a></li>
<li><a href="#user-content-%E5%AD%A6%E4%B9%A0%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%B8%B2%E6%9F%93">æœåŠ¡å™¨ç«¯æ¸²æŸ“</a></li>
<li><a href="#user-content-%E5%AD%A6%E4%B9%A0-immutablejs">Immutable.js</a></li>
<li><a href="#user-content-%E5%AD%A6%E4%B9%A0-relay-falcor-%E7%AD%89">Relay, Falcor ç­‰</a></li>
</ul>
<h2 id="å­¦ä¹ -React-æœ¬èº«"><a href="#å­¦ä¹ -React-æœ¬èº«" class="headerlink" title="å­¦ä¹  React æœ¬èº«"></a>å­¦ä¹  React æœ¬èº«</h2><p>æœ‰ä¸€ç§å¸¸è§çš„è¯¯è§£æ˜¯: ä½ éœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´åœ¨é…ç½®å·¥å…·ä¸Š, ç„¶åæ‰å¼€å§‹å­¦ä¹  React. åœ¨å®˜æ–¹æ–‡æ¡£é‡Œ, ä½ å¯ä»¥æ‰¾åˆ° <a target="_blank" rel="noopener" href="https://facebook.github.io/react/docs/getting-started.html#quick-start-without-npm">copy-paste HTML template</a>. åªéœ€è¦ä¿å­˜ä¸º <code>.html</code> æ–‡ä»¶, ä½ å°±å¯ä»¥é©¬ä¸Šå¼€å§‹å­¦ä¹ äº†. <strong>è¿™ä¸ªæ­¥éª¤ä¸éœ€è¦ä»»ä½•å·¥å…·, ä½ ä¹Ÿæ— éœ€é¢å¤–å­¦ä¹ å·¥å…·ä½¿ç”¨, ç›´åˆ°ä½ èƒ½ç†Ÿç»ƒæŒæ¡ React åŸºç¡€.</strong></p>
<p>æˆ‘ä¾ç„¶è§‰å¾—, å­¦ä¹  React æœ€ç®€å•çš„æ–¹æ³•æ˜¯é€šè¿‡å®˜æ–¹æ•™ç¨‹ <a target="_blank" rel="noopener" href="https://facebook.github.io/react/docs/tutorial.html">the official tutorial</a>.</p>
<h2 id="å­¦ä¹ -npm"><a href="#å­¦ä¹ -npm" class="headerlink" title="å­¦ä¹  npm"></a>å­¦ä¹  <code>npm</code></h2><p><code>npm</code> æ˜¯ Node.js åŒ…ç®¡ç†å·¥å…·, ä¹Ÿæ˜¯å‰ç«¯å·¥ç¨‹å¸ˆå’Œè®¾è®¡å¸ˆåˆ†äº« JavaScript ä»£ç æœ€æµè¡Œçš„æ–¹å¼. å®ƒåŒ…å«äº†åä¸º <code>CommonJS</code> çš„æ¨¡å—ç³»ç»Ÿ, è®©ä½ å¯ä»¥å®‰è£… JavaScript å†™çš„å‘½ä»¤è¡Œå·¥å…·. ä½œä¸ºèƒŒæ™¯çŸ¥è¯†, å¯ä»¥é˜…è¯» <a target="_blank" rel="noopener" href="http://0fps.net/2013/01/22/commonjs-why-and-how/">è¿™ç¯‡æ–‡ç« </a> äº†è§£ <code>CommonJS</code> å¯¹äºæµè§ˆå™¨çš„é‡è¦æ€§, é˜…è¯»  <a target="_blank" rel="noopener" href="http://wiki.commonjs.org/wiki/Introduction">CommonJS Spec Wiki</a> äº†è§£å…³äº <code>CommonJS</code> API çš„æ›´å¤šå†…å®¹</p>
<p>åœ¨ React ç”Ÿæ€åœˆä¸­, å¤§éƒ¨åˆ†å¯é‡ç”¨çš„ç»„ä»¶ã€åº“å’Œå·¥å…·éµå¾ª <code>CommonJS</code> æ¨¡å—è§„èŒƒ, å¯é€šè¿‡ <code>npm</code> æ¥å®‰è£….</p>
<h2 id="å­¦ä¹ -JavaScript-æ‰“åŒ…å·¥å…·"><a href="#å­¦ä¹ -JavaScript-æ‰“åŒ…å·¥å…·" class="headerlink" title="å­¦ä¹  JavaScript æ‰“åŒ…å·¥å…·"></a>å­¦ä¹  JavaScript æ‰“åŒ…å·¥å…·</h2><p>å‡ºäºè‹¥å¹²æŠ€æœ¯åŸå› , <code>CommonJS</code> æ¨¡å— (ä¹Ÿå°±æ˜¯ <code>npm</code> é‡Œçš„æ‰€æœ‰å†…å®¹) ä¸èƒ½ç›´æ¥ç”¨åˆ°æµè§ˆå™¨. ä½ éœ€è¦ä¸€ä¸ª JavaScript â€œæ‰“åŒ…å·¥å…·(bundler)â€ æ¥æŠŠè¿™äº›æ¨¡å—æ‰“åŒ…æˆ <code>.js</code> æ–‡ä»¶, ä½¿ä½ å¯ä»¥åœ¨ç½‘é¡µä¸­é€šè¿‡ <code>&lt;script&gt;</code> æ ‡ç­¾å¼•å…¥å®ƒä»¬.</p>
<p>JavaScript æ‰“åŒ…å·¥å…·åŒ…æ‹¬ <code>webpack</code> å’Œ <code>browserify</code>. å®ƒä»¬éƒ½æ˜¯å¥½çš„é€‰æ‹©, ä½†æˆ‘ä¸ªäººæ›´å–œæ¬¢ <code>webpack</code> , å› ä¸ºå®ƒæœ‰è®¸å¤šåŠŸèƒ½ç®€åŒ–å¤§å‹åº”ç”¨å¼€å‘. é‰´äº webpack æ–‡æ¡£å¯èƒ½ä»¤äººæ„Ÿåˆ°å›°æƒ‘, æˆ‘ä¹Ÿå†™äº†ä¸¤ç¯‡æ–‡ç« : <a target="_blank" rel="noopener" href="https://github.com/petehunt/react-webpack-template">plug-and-play template for getting started</a> å’Œé’ˆå¯¹æ›´å¤æ‚ç”¨ä¾‹çš„ <a target="_blank" rel="noopener" href="https://github.com/petehunt/webpack-howto">how-to guide for webpack</a>.</p>
<p>è¦è®°ä½çš„ä¸€ç‚¹: <code>CommonJS</code> ä½¿ç”¨äº† <code>require()</code> å‡½æ•°æ¥å¼•å…¥æ¨¡å—, å› æ­¤è®¸å¤šäººå¯¹æ­¤æ„Ÿåˆ°ç–‘æƒ‘, å¹¶è®¤ä¸ºéœ€è¦å¯¼å…¥ <code>require.js</code> åˆ°å·¥ç¨‹é‡Œ. å‡ºäºè‹¥å¹²æŠ€æœ¯åŸå› , æˆ‘å»ºè®®ä½ é¿å…ä½¿ç”¨ <code>require.js</code>. å®ƒåœ¨ React ç”Ÿæ€åœˆå¹¶ä¸æµè¡Œ.</p>
<h2 id="å­¦ä¹ -ES6"><a href="#å­¦ä¹ -ES6" class="headerlink" title="å­¦ä¹  ES6"></a>å­¦ä¹  ES6</h2><p>åœ¨ JSX (ä½ ä¼šåœ¨ React tutorial ä¸­å­¦ä¹ åˆ°) ä»¥å¤–, ä½ å¯èƒ½ä¼šæ³¨æ„åˆ° React ä¾‹å­ä¸­ä¸€äº›æœ‰è¶£çš„è¯­æ³•. è¿™è¢«ç§°ä¸º ECMAScript6, æ˜¯ JavaScript çš„æœ€æ–°ç‰ˆæœ¬. ç”±äº ES6 å¾ˆæ–°, ä½ å¯èƒ½è¿˜æ²¡å­¦ä¹ åˆ°, æµè§ˆå™¨ä¹Ÿå¯èƒ½å°šæœªå…¼å®¹, ä½†åˆ«æ‹…å¿ƒ, é€šè¿‡åˆé€‚çš„é…ç½®, ä½ çš„æ‰“åŒ…å·¥å…·ä¼šä¸ºä½ è‡ªåŠ¨è½¬æ¢æˆå…¼å®¹ä»£ç .</p>
<p>å¦‚æœä½ åªæƒ³è¦ä½¿ç”¨ React æ¥æŠŠäº‹æƒ…åšå®Œ, <strong>ä½ å¯ä»¥è·³è¿‡ ES6 çš„å­¦ä¹ ,</strong> æˆ–è€…ç•™åˆ°ä»¥åå†å­¦ä¹ .</p>
<p>ä½ å¯èƒ½ä¼šçœ‹åˆ°ä¸€äº›è®¨è®ºè¯´æ›´é€‚åˆç”¨ ES6 çš„ class æ¥åˆ›å»º React ç»„ä»¶. è¿™å¹¶ä¸æ˜¯çœŸçš„, å¤§å¤šæ•°äºº (åŒ…æ‹¬ Facebook) ç”¨çš„è¿˜æ˜¯ <code>React.createClass()</code>.</p>
<h2 id="å­¦ä¹ è·¯ç”±-routing"><a href="#å­¦ä¹ è·¯ç”±-routing" class="headerlink" title="å­¦ä¹ è·¯ç”± (routing)"></a>å­¦ä¹ è·¯ç”± (routing)</h2><p>â€œå•é¡µé¢åº”ç”¨â€ æ˜¯æ—¶ä¸‹çš„æŠ€æœ¯çƒ­ç‚¹. å½“ç½‘é¡µåŠ è½½å®Œæˆ, ç”¨æˆ·ç‚¹å‡»é“¾æ¥æˆ–è€…æŒ‰é’®çš„æ—¶å€™, JavaScript ä¼šæ›´æ–°é¡µé¢å’Œæ”¹å˜åœ°å€æ , ä½†ç½‘é¡µä¸ä¼šåˆ·æ–°. åœ°å€æ çš„ç®¡ç†å°±æ˜¯é€šè¿‡ <strong>è·¯ç”±(router)</strong> æ¥å®Œæˆçš„.</p>
<p>ç›®å‰ React ç”Ÿæ€åœˆæœ€å—æ¬¢è¿çš„è·¯ç”±è§£å†³æ–¹æ¡ˆæ˜¯ <a target="_blank" rel="noopener" href="https://github.com/rackt/react-router">react-router</a>. å¦‚æœä½ æ­£åœ¨åˆ›å»ºä¸€ä¸ªå•é¡µé¢åº”ç”¨, æœ‰ä»€ä¹ˆç†ç”±ä¸å»ä½¿ç”¨å®ƒå‘¢?</p>
<p><strong>å¦‚æœä½ åˆ›å»ºçš„å¹¶éå•é¡µé¢åº”ç”¨, è¯·ä¸è¦ä½¿ç”¨è·¯ç”±.</strong> æ— è®ºå¦‚ä½•, å¤§éƒ¨åˆ†é¡¹ç›®éƒ½æ˜¯ä»å¤§å‹åº”ç”¨ä¸­çš„å°ç»„ä»¶å¼€å§‹çš„.</p>
<h2 id="å­¦ä¹ å†…è”æ ·å¼"><a href="#å­¦ä¹ å†…è”æ ·å¼" class="headerlink" title="å­¦ä¹ å†…è”æ ·å¼"></a>å­¦ä¹ å†…è”æ ·å¼</h2><p>åœ¨ React å‡ºç°ä¹‹å‰, å¾ˆå¤šäººé€šè¿‡åƒ SASS è¿™æ ·çš„é¢„å¤„ç†å™¨æ¥é‡ç”¨å¤æ‚çš„ CSS æ ·å¼è¡¨. é‰´äº React ä½¿å¼€å‘å¯é‡ç”¨ç»„ä»¶å˜å¾—å®¹æ˜“, ä½ çš„æ ·å¼è¡¨å¯ä»¥å˜å¾—æ²¡é‚£ä¹ˆå¤æ‚äº†. ç¤¾åŒºä¸­è®¸å¤šäºº (åŒ…æ‹¬æˆ‘) æ­£å°è¯•å®Œå…¨æŠ›å¼ƒæ ·å¼è¡¨.</p>
<p>ç”±äºä¸€äº›åŸå› , å…¶å®è¿™æ˜¯ä¸ªç›¸å½“ç–¯ç‹‚çš„ä¸»æ„. è¿™è®©åª’ä½“æŸ¥è¯¢ (media quries) æ›´åŠ å›°éš¾äº†, è€Œä¸”è¿™ç§æŠ€æœ¯å¯èƒ½æœ‰æ€§èƒ½ä¸Šçš„å±€é™æ€§. <strong>å½“ä½ å¼€å§‹ç”¨ React çš„æ—¶å€™, åªè¦ç”¨ä½ å¹³å¸¸ä½¿ç”¨çš„æ–¹æ³•å»å†™å°±å¥½äº†.</strong></p>
<p>ä¸€æ—¦ä½ æ‰¾åˆ°äº†ç”¨ React å¼€å‘çš„æ„Ÿè§‰, ä½ å°±å¯ä»¥å…³æ³¨é‚£äº›å¯ä½œä¸ºæ›¿ä»£çš„æŠ€æœ¯äº†. å…¶ä¸­ä¸€ç§æµè¡ŒæŠ€æœ¯æ˜¯ <a target="_blank" rel="noopener" href="https://en.bem.info/">BEM</a>. æˆ‘å»ºè®®ä½ é€æ¸åœç”¨ CSS é¢„å¤„ç†å™¨, å› ä¸º React ç»™äº†ä½ ä¸€ç§æ›´å¼ºå¤§çš„æ–¹å¼å»é‡ç”¨æ ·å¼ (é€šè¿‡é‡ç”¨ç»„ä»¶), å¹¶ä¸” JavaScript æ‰“åŒ…å·¥å…·å¯ä»¥ä¸ºä½ ç”Ÿæˆæ›´é«˜æ•ˆçš„æ ·å¼è¡¨ (æˆ‘æ›¾ç»<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=VkTCL6Nqm6Y">åœ¨ OSCON ä¸Šå‘è¡¨è¿‡å…³äºè¿™ä¸ªçš„æ¼”è®²</a>). è¯´äº†è¿™ä¹ˆå¤š, æ€»ä¹‹ React å°±åƒå…¶ä»– JavaScript åº“ä¸€æ ·, å¯ä»¥å’Œ CSS é¢„å¤„ç†å™¨å¾ˆå¥½åœ°é…åˆå·¥ä½œ.</p>
<p>å¦ä¸€ç§å¯é€‰é¡¹æ˜¯ <a target="_blank" rel="noopener" href="http://glenmaddern.com/articles/css-modules">CSS æ¨¡å—</a>, æ›´å…·ä½“åœ°è¯´, æ˜¯ <a target="_blank" rel="noopener" href="https://github.com/gajus/react-css-modules">react-css-modules</a>. è™½ç„¶æœ‰äº†è¿™äº› CSS æ¨¡å—, ä½ è¿˜æ˜¯å†™ CSS (æˆ–è€…æ˜¯ SASS&#x2F;LESS&#x2F;Stylus), ä½†ä½ å¯ä»¥åƒå¤„ç† React ä¸­çš„å†…è”æ ·å¼é‚£æ ·ç®¡ç†å’Œç»„ç»‡ CSS æ–‡ä»¶. ä½ ä¹Ÿä¸éœ€è¦æ‹…å¿ƒç”¨åˆ° BEM é‚£æ ·çš„æ–¹æ³•å­¦å»ç®¡ç†ç±»å, å› ä¸ºæ¨¡å—ç³»ç»Ÿåœ¨åº•å±‚å·²ç»å¸®ä½ å¤„ç†å¥½äº†.</p>
<h2 id="å­¦ä¹ æœåŠ¡å™¨ç«¯æ¸²æŸ“"><a href="#å­¦ä¹ æœåŠ¡å™¨ç«¯æ¸²æŸ“" class="headerlink" title="å­¦ä¹ æœåŠ¡å™¨ç«¯æ¸²æŸ“"></a>å­¦ä¹ æœåŠ¡å™¨ç«¯æ¸²æŸ“</h2><p>æœåŠ¡å™¨ç«¯æ¸²æŸ“ç»å¸¸è¢«ç§°ä¸º â€œé€šç”¨åº”ç”¨â€ æˆ– â€œåŒæ„åº”ç”¨â€. è¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨ React ç»„ä»¶åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“å‡ºé™æ€ HTML. è¿™æ ·åšå¯ä»¥æé«˜åˆå§‹åŒ–åŠ è½½çš„æ€§èƒ½, å› ä¸ºç”¨æˆ·ä¸ç”¨ç­‰åˆ° JS ä¸‹è½½å®Œæ‰çœ‹åˆ°åˆå§‹ç•Œé¢, å¹¶ä¸” React å¯ä»¥é‡ç”¨æœåŠ¡å™¨ç«¯æ¸²æŸ“å‡ºçš„ HTML, æ— éœ€å®¢æˆ·ç«¯é‡æ–°ç”Ÿæˆ.</p>
<p>å¦‚æœä½ å‘ç°é¦–å±æ¸²æŸ“é€Ÿåº¦è¿‡æ…¢, æˆ–è€…æƒ³æé«˜ç½‘ç«™åœ¨æœç´¢å¼•æ“çš„æ’è¡Œ, ä½ å°±éœ€è¦æœåŠ¡å™¨ç«¯æ¸²æŸ“äº†. å°½ç®¡ Google ç°åœ¨ä¹Ÿä¼šç´¢å¼•å®¢æˆ·ç«¯æ¸²æŸ“çš„å†…å®¹, ä½†æˆªè‡³ 2016 å¹´ 1 æœˆ, è¿™æ ·åšä»è¢«è¯å®ä¼šå¯¹æ’è¡Œæœ‰è´Ÿé¢å½±å“, è¿™å¯èƒ½æ˜¯ç”±äºå®¢æˆ·ç«¯æ¸²æŸ“çš„æ€§èƒ½é—®é¢˜æ‰€é€ æˆçš„.</p>
<p>æœåŠ¡å™¨ç«¯æ¸²æŸ“è¿˜éœ€è¦è®¸å¤šå·¥å…·çš„è¾…åŠ©, å› ä¸ºæ˜¾ç„¶ React ç»„ä»¶ä¸æ˜¯åœ¨è€ƒè™‘æœåŠ¡å™¨ç«¯æ¸²æŸ“çš„æƒ…å†µä¸‹å†™å‡ºæ¥çš„, ä½ åº”è¯¥å…ˆæ„å»ºä½ çš„åº”ç”¨, ä¹‹åå†å…³å¿ƒæœåŠ¡å™¨ç«¯æ¸²æŸ“çš„é—®é¢˜. ä¸ç”¨æ‹…å¿ƒ, ä½ ä¸éœ€è¦é‡å†™æ‰€æœ‰ç»„ä»¶å»æ”¯æŒå®ƒ.</p>
<h2 id="å­¦ä¹ -Flux"><a href="#å­¦ä¹ -Flux" class="headerlink" title="å­¦ä¹  Flux"></a>å­¦ä¹  Flux</h2><p>ä½ å¯èƒ½å¬è¿‡ Flux, ä¸è¿‡å…³äº Flux æœ‰å¤§é‡çš„é”™è¯¯èµ„è®¯.</p>
<p>è®¸å¤šäººä¸€åä¸‹æ¥åˆšå¼€å§‹æ„å»ºåº”ç”¨, å°±è®¤ä¸ºéœ€è¦ç”¨ Flux æ¥å®šä¹‰ä»–ä»¬çš„æ•°æ®æ¨¡å‹. <strong>è¿™æ ·é‡‡ç”¨ Flux æ˜¯ä¸å¯¹çš„, Flux åº”è¯¥åœ¨å¤§é‡ç»„ä»¶è¢«å»ºç«‹å®Œæˆä»¥åæ‰è¢«å¼•å…¥.</strong></p>
<p>React ç»„ä»¶ä¹‹é—´å­˜åœ¨å±‚çº§å…³ç³». åœ¨å¾ˆå¤šæ—¶å€™, ä½ çš„æ•°æ®æ¨¡å‹ä¹Ÿè·Ÿéšè¿™ç§å±‚çº§. è¿™ç§æƒ…å†µä¸‹, Flux ä¸ä¼šç»™ä½ å¾ˆå¤§å¸®åŠ©. ä½†æœ‰äº›æ—¶å€™, ä½ çš„æ•°æ®æ¨¡å‹æ²¡æœ‰å±‚æ¬¡, å½“ä½ çš„ React ç»„ä»¶å¼€å§‹æ¥å—æ²¡æœ‰å…³è”çš„ <code>props</code> çš„æ—¶å€™, æˆ–è€…å½“å°éƒ¨åˆ†ç»„ä»¶å¼€å§‹å˜å¾—å¤æ‚çš„æ—¶å€™, ä½ æ‰å¯èƒ½éœ€è¦çœ‹çœ‹ Flux.</p>
<p><strong>ä½ ä¼šçŸ¥é“ä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨ Flux. å¦‚æœä½ ä¸ç¡®å®šæ˜¯å¦éœ€è¦ç”¨å®ƒ, ä½ å°±ä¸éœ€è¦å®ƒ.</strong></p>
<p>å¦‚æœä½ å†³å®šä½¿ç”¨ Flux, ç°åœ¨æœ€æµè¡Œçš„ã€æ–‡æ¡£æœ€å…¨çš„ Flux åº“æ˜¯ <a target="_blank" rel="noopener" href="http://redux.js.org/">Redux</a>. å½“ç„¶ä¹Ÿæœ‰è®¸å¤šå…¶ä»–é€‰æ‹©, ä½ æˆ–è€…ä¼šæœ‰å…´è¶£å°è¯•ä½¿ç”¨å®ƒä»¬, ä½†æˆ‘çš„å»ºè®®æ˜¯åªéœ€è¦ç”¨æœ€æµè¡Œçš„ Redux å°±è¶³å¤Ÿäº†.</p>
<h2 id="å­¦ä¹ -Immutable-js"><a href="#å­¦ä¹ -Immutable-js" class="headerlink" title="å­¦ä¹  Immutable.js"></a>å­¦ä¹  Immutable.js</h2><p><a target="_blank" rel="noopener" href="https://facebook.github.io/immutable-js/">Immutable.js</a> æä¾›äº†ä¸€ç³»åˆ—çš„æ•°æ®ç»“æ„, ä»¥å¸®åŠ©è§£å†³æ„é€  React åº”ç”¨æ—¶çš„æŸäº›æ€§èƒ½é—®é¢˜. è¿™æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„åº“, ä½ å¯èƒ½ä¼šåœ¨åº”ç”¨å‘å±•çš„è¿‡ç¨‹é‡Œå¤§é‡ç”¨åˆ°å®ƒ, ä½†ç›´åˆ°ä½ åœ¨æ„è¯†åˆ°æ€§èƒ½é—®é¢˜ä»¥å‰, å®ƒæ˜¯å®Œå…¨ä¸å¿…è¦çš„.</p>
<h2 id="å­¦ä¹ -Relay-Falcor-ç­‰"><a href="#å­¦ä¹ -Relay-Falcor-ç­‰" class="headerlink" title="å­¦ä¹  Relay, Falcor ç­‰"></a>å­¦ä¹  Relay, Falcor ç­‰</h2><p>è¿™äº›æŠ€æœ¯å¯ä»¥å¸®ä½ å‡å°‘ AJAX è¯·æ±‚æ•°, å®ƒä»¬ä»ç„¶æ˜¯éå¸¸å‰æ²¿çš„, æ‰€ä»¥å¦‚æœä½ æ²¡æœ‰é‡åˆ°è¿‡å¤š AJAX è¯·æ±‚çš„é—®é¢˜, å°±ä¸éœ€è¦ç”¨åˆ° Relay æˆ–è€… Falcor.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jack Chu</p>
  <div class="site-description" itemprop="description">ä¼¤å¿ƒæ¡¥ä¸‹æ˜¥æ³¢ç»¿ï¼Œæ›¾æ˜¯æƒŠé¸¿ç…§å½±æ¥ã€‚</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">6</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-at"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jack Chu</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
